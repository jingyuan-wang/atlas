# 一个`由浅入深`的User Story小教程

注：本文所指的user story指的是已经进入到开发阶段的功能文档，是前期epic story的细化和增强。

## User story原则
一个好的故事应该很清晰地体现对用户或客户的价值，同时具备以下特点：

### INVEST

### Independent

我们要尽量避免stories之间的相互依赖，在排优先级和迭代计划的时候，依赖会导致估算和分工变得
困难，因此每一个story都尽量独立。通常我们可以使用以下方法来降低依赖：

1. 将互相依赖的story合并成一个大的、独立的故事
2. 换一种方式将故事进行拆分

### Negotiable

Story只是一个feature的简单描述，细节在跟客户与开发团队的讨论中不断完善。就像是Ron Jeffries
提出的User story的3C原则：Card，Communication，Confirmation一样，沟通是Story非常重要的
一环，因此在story的编写过程中，文档的详尽不是追求的方向。

### Valuable

User Story应该很清晰地体现对用户或客户的价值。这也是对故事排优先级的基础，比较理想的状况
是让客户（或者与客户一起）进行故事的编写，这样也更容易达成Negotiable的原则。

### Estimable

一个Story一定要是可以估算的，开发人员需要对Stories进行估算，以便于确定优先级、工作量和开发计划。
一般情况下，故事拆分的粒度越细，越有利于估算的准确性。也就是接下来的S

`疑问：为什么估算时一定要采用斐波那契数列？`

### Small（Size appropriate）

故事尽量越小越好，要确保在一个迭代以内可以完成；但也不要太小，小到无法在一张卡内保证有价值的交付。

### Testable

如果说用户故事的描述代表了需要交付的价值，那么验收则是对价值的验证和确认过程。
因此一个故事必须是可测的，which means验收标准必须是清晰客观的。
例如，如果我们要编写一张提升用户体验的故事，验收标准如果是：`用户必须觉得app很快`，这个故事
就是不可测的；可测的故事是：`当用户进行xx操作时，从xx到xxx的响应时间必须在0.5秒以内`

***

## User Story构成

一个User Story通常会包含以下几个方面的内容，其中Narrative和验收标准（以下简称AC）是必需的。
一个没有明确定义出Narrative和AC的story，开发团队可以拒绝开发。

### Narrative
Narrative某种意义上，就是用户故事的核心。通常包含角色、功能和商业价值三个要素。
通常的叙述格式为：

`As a <role>, I want to <activity>, so that <Business value>`

中文格式对应为：

`作为一个<角色>，我想要<功能>，以便于<商业价值>`

例如

> 作为一个ThoughtWorker，我想要在手机上填写Timecard，以便于我能在没有电脑时，也可以
随时随地提交工时信息，确保公司能按时收回账款。

### Acceptance Criteria

AC是用户故事在进入开发之前，对需求细化和清晰化的体现。

Narrative中通常只包含功能的描述，细节的明晰和界定是在不断地沟通中产生的，
因此，对于确认的需求细节也需要清楚的记录下来，以作为测试时候的验收标准。

一般来说，AC的格式并不固定，重点是尽可能覆盖住各种场景。

比较推荐的方法是，在给每一张卡确定AC的时候，Tech Lead、QA和BA一起对故事卡进行沟通，
从而从不同角度对场景进行完善，确保AC的完整。

即使已经进入开发阶段，AC也不是固定不变的，在跟开发人员的沟通当中，随时可以进一步补充AC的完整度。

AC格式上可以参考BDD的`Given...when...then...`格式。（关于BDD的细节，等补充阅读再说吧）

### Scope

其实有了清晰的AC，Scope也就相应明确出来了，但是有时在一个Epic拆成不同的Stories导致Stories
之间互相存有依赖或关联时，通过Scope的说明，可以更明确地用语言界定出Story的范围，方便理解。
但是，一定要注意的是，Scope的说明文字不能取代沟通。

### Notes

如果说Narrative 覆盖了feature，AC覆盖了验收时的行为，若还有一些细节或说明条件需要补充，
可以记作Notes。例如：`标题输入不能超过15字.`


### Design

不论是Hi-Fi还是Lo-Fi的Mockup，图更能说明一切，最Lo-Fi的Sketch都胜过最详尽的文档。

***

## Case 分析


>Narrative
>-------------
>**作为** 华为的p-link使用者
**我想要** 能够自定义首页显示的信息模块
**为了** 更聚焦我关注的信息


>Acceptance Criteria
-------------
>**AC1:**
>
>- Given：我在P-Link首页
- When：点击"自定义模式"进入卡片自定义界面
- Then：可以看到所有卡片列表的checkbox
>
>**AC2:**
>
>- Given：我在P-Link首页卡片自定义模块
- When：反向勾选已☑️的卡片并**保存**
- Then：该卡片从首页删除
>
>**AC3:**
>
>- Given：我在P-Link首页卡片自定义界面
- When：勾选卡片列表的任意新卡片并保存
- Then：新卡片被添加在首页
>
>**AC4:**
>
>- Given：我完成对首页内容的自定义
- When：再次登陆p-link首页
- Then：看到的是最后一次更新的首页卡片
>
>Scope Out
--------------
>1. 根据对用户角色——项目经理/项目成员的判断，显示其有权限进行自定义的卡片，不在本卡范围之内。
>
>Mockup
-------
>Points: 3
------

**优点：**

1. 结构完整
2. Scope界定清晰


**改进点：**

1. Narrative的价值挖掘不够，对功能需求的思考不够深入
2. AC太过于依赖Mockup设计，行为拆解完全依赖于mockup已有的设计

重写`疑问：Narrative可以写多个么？`

>Narrative 1
>-------------
**作为** 华为的项目经理或是项目成员，也就是p-link的用户
**我想要** 能够自定义首页显示的数据模块
**为了** 更聚焦我关注的信息
>
Narrative 2
-------------
**作为** 华为的PM CoE人员，也就是p-link的设计者
**我想要** 能够让用户自行选择首页关注的信息
**为了** 开发出更多的信息模块供用户选择，同时也可以收集不同角色
和项目的用户对信息的关注点差异，从而帮助我们进一步完善产品
>
Acceptance Criteria
-------------
**AC1:**
>
- Given：登陆p-link首页
- When：点击"自定义模式"
- Then：打开自定义设置的侧边栏
>
**AC2:**
- Given：在首页自定义侧边栏
- When：勾选新项目
- Then：对应项目出现在左侧
>
**AC3:**
- Given：在首页自定义侧边栏
- When：解除勾选某项目
- Then：对应项目消失在左侧
>
**AC4:**
- Given：通过自定义边栏改变了首页卡片设置
- When：点击"关闭"
- Then：关闭自定义设置
- And：改变未生效，首页与打开侧边开之前保持一致
>
**AC5:**
- Given：通过自定义边栏改变了首页卡片设置
- When：点击"保存"
- Then：关闭自定义设置
- And：改变生效，并保存最新设置
>
**AC6:**
- Given：自定义侧边栏已打开
- When：切换卡片大小
- Then：无法切换卡片大小
>
**AC7:**
- Given：自定义侧边栏已打开
- When：拖拽卡片位置
- Then：无法拖拽
>
Scope
----------
1. 本卡仅实现功能：用户通过自定义模块改变首页卡片的显示
2. 根据用户的角色权限判断可供用户选择的项目不在本卡范围之内

重写之后的story偏大，可以进行进一步的拆分，根据故事的价值和优先级拆分如下：

1. `Story 1: AC 1、4、5` 实现基本保存的功能
2. `Story 2: AC 3、4` 让用户在操作变更时体验更好
3. `Story 3: AC 6、7` 限制不必要的额外操作，避免错误发生
